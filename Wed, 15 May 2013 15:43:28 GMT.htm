<!DOCTYPE html>
<html>
<head>
</head>
<body>
<div>
<ul class="dropdown" data-jkit="[menu]">
<li><a href="#!Статьи.Windows_Server_Services.Hyper-V_2012">Hyper-V 2012</a>
<ul class="sub_menu">
<li><a href="#!Статьи.Windows_Server_Services.Hyper-V_2012.Создание_виртуальной_машины">Создание виртуальной машины</a></li>
</ul>
</li>
</ul>
</div>
<p>&nbsp;</p>
<p>&nbsp;</p>
<p style="text-align: justify;">&nbsp;Для чего нужен виртуальный сервер? Каждая организация находит своё применение. Но для чего виртуальный сервер дома? А ведь в Windows 8 Pro\Ent\Ult Hyper-V встроен. Очень много создаётся тем об установке второй ОС на свой компьютер в целях изучения, например, Linux. Правда есть одно неудобство при такой установке: необходимость перезагружать компьютер, чтобы загрузится со второй ОС. При наличии <a href="http://ru.wikipedia.org/wiki/%D0%93%D0%B8%D0%BF%D0%B5%D1%80%D0%B2%D0%B8%D0%B7%D0%BE%D1%80">гипервизора</a> это неудобство невелируется. Однако, оно накладывает некоторые ограничения. Например отсутствие поддержки подключения на прямую USB. К счастью для компаний ключи 1С могут находится на любом компьютере\сервере в сети.&nbsp;В данной статье будет краткий обзор Hyper-V на примере Windows Server 2012 с установленной ролью Hyper-V и обзор&nbsp;<a href="http://www.exonix.ru/?avletj11izsni5bpb1iuuhk.htm">создания виртуальной машины</a>. Кратно о лицензии <a href="http://blogs.technet.com/b/vm/archive/2012/07/15/windows-server-2012-editions-and-licensing.aspx">роли Hyper-V</a> (хотя это не корректное выражение о лицензировании встроенной роли). Редакция Windows Server 2012 Stadard Edition позволяет вам использовать одну ВМ, или две ВМ при использовании хоста только с ролью Hyper-V. Ну, Datacenter есть Datacenter - количество ВМ неограничено. Существует бесплатная редакция Windows Hyper-V Server. Минусом или плюсом данной версии - она основана на Core установке, т.е. без GUI. К сожалению я не знаю, можно ли в версии Hyper-V добавить GUI, как в полной версии Windows. <span style="color: #ff0000;"><strong><a href="http://technet.microsoft.com/en-us/library/hh833684.aspx">Подробнее о Hyper-V&nbsp;2012&nbsp;</a></strong></span>&nbsp;на английском языке.</p>
<p style="text-align: justify;">&nbsp;Роль Hyper-V устанавливается в панеле "Управление сервером". Для работы с Hyper-V ваш процессор должен поддерживать аппаратную виртуализацию. Во время установки нужно будет ввести данные о том, где хранить информацию с настройками и образы дисков для виртуальной , а так же место хранения снимков. Для повышения производительности я рекомендую расположить файлы настройки и образы дисков на отдельном физическом диске. Благо, что есть в продаже ноутбуки (если кто работает за ноутбуком, а не за стационарным компьютером) с двумя дисками: SSD для системы и HDD для файлов. Для стационарного компьюетра добавить диск - не проблема. Я не рекомендую использовать для файлов образов дисков SSD диск, т.к. через год-два активного использования производительность диска может понизится ниже обычного HDD. Исправляется форматированием (erase) диска, а это неприятно, если там установлена система. Был подобный опыт...</p>
<p style="text-align: justify;">&nbsp;Вот так выглядит панель управления Hyper-V 2012.</p>
<p><img width="880" height="660" style="display: block; margin-left: auto; margin-right: auto;" alt="" src="http://fs.exonix.ru/resource/image/1HV.png" /></p>
<p style="text-align: justify;">&nbsp;Немного комментариев:</p>
<p style="text-align: justify;">&nbsp;- New - меню создания виртуальный машины, диска или флоппи диска.<br />&nbsp;- Import Virtual Machine - импорт виртуальной машины (ВМ). Можно выполнять без экспорта с другого сервера.<br />&nbsp;- Hyper-V Settings - настройки сервера по умолчанию: где хранить образы дисков, настройки ВМ, поведение клавиатуры и мыши и др.<br />&nbsp;- Virtual Switch Manager - управление виртуальными сетями.<br />&nbsp;- Virtual SAN Manager - управление дисками SAN<br />&nbsp;- Edit disk - редактирование существующими образами дисков.<br />&nbsp;- Inspect disk - просмотр информации о диске.<br />&nbsp;- Stop Service - остановка службы Hyper-V<br />&nbsp;- Remove server - удаление сервера</p>
<p style="text-align: justify;">&nbsp;Далее идёт меню для выбранной ВМ.</p>
<p style="text-align: justify;">&nbsp;- Connect - подключение через Virtual Machine Connection. Анналог подключения через консоль.<br />&nbsp;- Settings - настройки ВМ<br />&nbsp;- Start, Turn Off, Shut down, Save - запуск, выключение по питанию, выключение и сохранение состояния. Выключение поддерживается только ОС Windows.<br />&nbsp;- Snapshot - снимок ВМ. Сохранение состояния рабочей системы, к которой можно откатится в случае неполадок.<br />&nbsp;- Move - перемещение ВМ или образа диска.<br />&nbsp;- Export - экспорт ВМ.<br />&nbsp;- Rename, Delete - переименование и удаление ВМ.</p>
<p style="text-align: justify;">&nbsp;Папель настроек ВМ и комментарии к ней:</p>
<p>&nbsp;<img width="737" height="694" style="display: block; margin-left: auto; margin-right: auto;" alt="" src="http://fs.exonix.ru/resource/image/4HV.png" /></p>
<p style="text-align: justify;">&nbsp;- Add Hardware - добавление устройств. Legacy Network Adapter нужен для Linux OS с ядром до 3.4. С ядром ниже 3.4 необходимо установить Linux IC. P.s.: ядро 3.2 имеет критические несовместимости с Hyper-V. ВМ может не загрузится после перезагрузки. В последних версиях ядра 3.2 исправили несовместимость с Hyper-V сетевой картой.<br />&nbsp;- Bios - выбор способа загрузки.<br />&nbsp;- Memory - управлению памятью.<br />&nbsp;- Processor - управление процессором. Для моего процессора с 8 логическими процессорами возможна установка только 8 виртуальных процессоров. Через правку конфигурационного файла XML можно назначить сверх лимита.<br />&nbsp;- IDE Controller, SCSI Controller - управление жёсткими дисками и оптическими дисководами.<br />&nbsp;- Network Adapter - управление сетевыми адаптерами.<br />&nbsp;- COM, Diskette Drive - управление Com-портами и флоппи-дисководами.<br />&nbsp;- и общие настройки для ВМ: место хранения снимков и др.</p>
<p style="text-align: justify;">&nbsp;Далее обзор виртуальных сетей. Обычно это вызывает вопросы у пользователей Hyper-V.</p>
<p><img width="737" height="694" style="display: block; margin-left: auto; margin-right: auto;" alt="" src="http://fs.exonix.ru/resource/image/5HV(1).png" /></p>
<p style="text-align: justify;">&nbsp;Существует три типа сетей: Внешняя (External), Внутреняя (Interna) и изолированная\частная (Private). После создания виртуальной сети можно в любой момент поменять её тип. Разница в типах виртуальных сетей заключается в разграничении доступа к "внешним" ресурсам. В Hyper-v 3 (Windows Server 2012) появилась возможность менять типы сетей у рабочих ВМ.</p>
<p style="text-align: justify;">&nbsp;- Изолированная сеть Private имеет доступ только в пределах своей сети. ВМ с изолированной сетью взаимодействует только с ВМ с такой же сетью. При этом разные изолированные сети (Private 1, 2, 3, 4) так же <strong>не</strong> могут между собой взаимодействовать. Однако, между двумя ВМ в разных сетях можно установить третий сервер с двумя сетевыми интерфейсами из каждой сети, и настроить <a href="http://www.exonix.ru/?v0xuwdyem3nzasvpeqcxhx4.htm">RRAS как Lan routing</a>. Для взаимодействия с интернетом RRAS должен быть настроен как NAT (вторая сетевая карта должна быть типа Внешняя).</p>
<p style="text-align: justify;">&nbsp;- Внутренняя сеть Internal может может взаимодействовать с физической сетевой картой сервера Hyper-V. При этом на самом хосте создаётся виртуальный интерфейс, который можно\нужно настроить, если на ВМ не установлен DHCP сервер. Можно на хосте установить роль RRAS. Тогда ВМ можно подключить к интернету через NAT. Данный тип подключения - отличный способ протестировать различные программные шлюзы, <em>но установленные на хосте</em>. Позволяет возможность доступа по RDP к Windows ВМ и по SSH к Unix-like ВМ. Будьте внимательны: установка роли RRAS снимает бесплатную лицензию на хост!</p>
<p><img width="0" height="0" alt="" src="http://fs.exonix.ru/resource/image/6HV.png" /><img width="753" height="663" style="display: block; margin-left: auto; margin-right: auto;" alt="" src="http://fs.exonix.ru/resource/image/6HV.png" /></p>
<p style="text-align: justify;">&nbsp;- Внешняя сеть External использует одну из (если их несколько) сетевых карт хостового сервера. Напрямую взаимодействует с внешними ресурсами. К примеру, ВМ может получить IP адрес от вашего роутера или модема, если там включена служба DHCP, а следовательно, будет находится <strong>в одной локальной сети с самим сервером Hyper-V</strong>. Если же службы DHCP в сети нет, то сетевая карта ВМ вручную настраивается так же, как и сетевая карта хоста. Есстественно, что IP адреса не могут быть одинаковыми. Позволяет возможность доступа по RDP к Windows ВМ или по SSH к Unix-like ВМ, <strong>а так же прямому доступу ВМ к интернету</strong> через установленный маршрутизатор или модем.</p>
<p style="text-align: right;"><em><img width="0" height="0" alt="" src="http://fs.exonix.ru/resource/image/5HV(1).png" />январь 2013</em></p>
<p style="text-align: justify;"></p>
<div id="vk_comments"></div>
</body>
</html>