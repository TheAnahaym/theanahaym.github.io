<div>
<ul data-jkit="[menu]" class="dropdown">
<li><a href="#!Статьи.Windows_Server_Services.Файловые_службы.Перемещаемые_профили">Перемещаемые профили</a>
<ul class="sub_menu">
<li><a href="#!Статьи.Windows_Server_Services.Файловые_службы.Перенаправляемые_папки">Перенаправляемые папки</a></li>
<li><a href="#!Статьи.Windows_Server_Services.Файловые_службы.Миграция_пользовательских_профилей">Миграция пользовательских профилей</a></li>
</ul>
</li>
</ul>
</div>
<p>&nbsp;</p>
<p>&nbsp;</p>
<p style="text-align: justify;">&nbsp;Перемещаемые профили позволяют пользователям иметь одно пользовательское окружение, настройки программ при работе за разными компьютерами. Для системного администратора позволяют управлять пользовательским профилем при выключенном компьютере пользователя, и самое важное, позволяют централизованное резервное копирование. Недостатком перемещаемого профиля может стать его размер и небольшая скорость локальной сети, т.к. перемещаемый профиль это полное копирование пользовательских данных по сети. Но для решения этого недостатка могут помочь <a href="http://www.exonix.ru/?ffz8iqfdebxezrdyrenviub.htm">перенаправляемые папки</a>. Тестовый стенд состоит из контролелра домена 2012, файлового сервера 2012 и клиента Windows 8. Конфигурации представлены ниже. Подробнее о перемещаемых профилях <a href="http://technet.microsoft.com/en-us/library/cc784961(v=ws.10).aspx">в документации на английском языке для Server 2003</a>. Для Server 2012 почти ничего не изменилось.</p>
<p><img height="768" width="1024" alt="fold0.png" src="1665845879189.png" style="display: block; margin-left: auto; margin-right: auto;"></p>
<p><img height="768" width="1024" alt="fold1.png" src="1665845879191.png" style="display: block; margin-left: auto; margin-right: auto;"></p>
<p><img height="768" width="1024" alt="fold2.png" src="1665845879193.png" style="display: block; margin-left: auto; margin-right: auto;"></p>
<p style="text-align: justify;">На файловом сервере создаётся общий сетевой ресурс со следующими общими правами:</p>
<p><img height="768" width="1024" alt="fold3.png" src="1665845879195.png" style="display: block; margin-left: auto; margin-right: auto;"></p>
<p style="text-align: justify;">&nbsp;Настройка NTFS-разрешений для общего ресурса. Снимается наследование от родителя с копированием прав.</p>
<p><img height="768" width="1024" alt="fold4.png" src="1665845879197.png" style="display: block; margin-left: auto; margin-right: auto;"></p>
<p style="text-align: justify;">&nbsp;Для того, что бы системный администратор имел доступ к профилю на сервере необходимо включить в групповой политике следующую опцию указанную ниже и применить к подразделению с компьютерами. Однако, из-за UAC доступ будет возможен через файловый менеджер, запущенный от имени администратора. Я буду использовать Total Commander. По умолчанию Explorer запущенный от имени администратора всё равно не будет иметь доступа к профилю.</p>
<p><img height="768" width="1024" alt="fold5.png" src="1665845879199.png" style="display: block; margin-left: auto; margin-right: auto;"></p>
<p style="text-align: justify;">&nbsp;Включить перемещаемый профиль можно двумя способами. Один из них через GPO, однако этот метод содержит включение на уровне компьютера. Т.е. все пользователи, использующие компьютер с данной политикой, будут иметь перемещаемый профиль, который не смогут загрузить на другом компьютере, если там политика не включена. Я не буду рассматривать данный метод.</p>
<p style="text-align: justify;">&nbsp;Второй метод включения перемещения профиля находится в свойствах учётной записи пользователя. Во вкладке "провиль" в поле "путь к профилю" достаточно записать путь к ресурсу, где будут храниться профили пользователей.</p>
<p><img height="768" width="1024" alt="fold6.png" src="1665845879201.png" style="display: block; margin-left: auto; margin-right: auto;"></p>
<p style="text-align: justify;">&nbsp;Если вы создаёте нового пользователя, у которого должен быть включён перемещаемый профиль, вы можете не создовать новую учётную запись, а скопировать с уже имеющейся учётной записи, для которой перемещамый профиль включён.</p>
<p><img height="768" width="1024" alt="fold7.png" src="1665845879203.png" style="display: block; margin-left: auto; margin-right: auto;"></p>
<p style="text-align: justify;">&nbsp;Если в организации только вводится перемещаемый профиль, вы можете выделить все нужные учётные записи и массово назначить всем путь для перемещаемого профиля. Можно использовать маски, например %username% - будет создана папка с профилем по имени учётной записи. Собственно, на этом настройка перемещаемого профиля закончена.</p>
<p><img height="768" width="1024" alt="fold8.png" src="1665845879205.png" style="display: block; margin-left: auto; margin-right: auto;"></p>
<p style="text-align: justify;">&nbsp;Как я уже упоминал, из-за UAC доступ из продника запрещён, т.к. проводник работает с понищенными правами, и запуск его от имени администратора ситуацию не изменит. Если конечно, на сервере не было сделано некоторых изминений, невилирующих такую защиту. Файловый менеджер Total Commander, запущенный от имени администратора, имеет доступ пользовательскому профилю.</p>
<p><img height="768" width="1024" alt="fold9.png" src="1665845879207.png" style="display: block; margin-left: auto; margin-right: auto;"></p>
<p style="text-align: right;"><em>06.05.2012</em></p>
<p style="text-align: justify;">&nbsp;</p>
<div id="vk_comments"></div>